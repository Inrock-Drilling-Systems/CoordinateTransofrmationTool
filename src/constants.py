# Original dictionary with only US Feet EPSG codes
spsc83_zones = {
    # Alabama
    "Alabama East (US Feet)": "0101",
    "Alabama West (US Feet)": "0102",

    # Alaska
    # All meters are removed to new dictionary
    "Alaska Zone 1 (US Feet)": "5001",
    "Alaska Zone 2 (US Feet)": "5002",
    "Alaska Zone 3 (US Feet)": "5003",
    "Alaska Zone 4 (US Feet)": "5004",
    "Alaska Zone 5 (US Feet)": "5005",
    "Alaska Zone 6 (US Feet)": "5006",
    "Alaska Zone 7 (US Feet)": "5007",
    "Alaska Zone 8 (US Feet)": "5008",
    "Alaska Zone 9 (US Feet)": "5009",
    "Alaska Zone 10 (US Feet)": "5010",

    # Arizona
    "Arizona Central (US Feet)": "0202",
    "Arizona East (US Feet)": "0201",
    "Arizona West (US Feet)": "0203",

    # Arkansas
    "Arkansas North (US Feet)": "0301",
    "Arkansas South (US Feet)": "0302",

    # California
    "California Zone 1 (US Feet)": "0401",
    "California Zone 2 (US Feet)": "0402",
    "California Zone 3 (US Feet)": "0403",
    "California Zone 4 (US Feet)": "0404",
    "California Zone 5 (US Feet)": "0405",
    "California Zone 6 (US Feet)": "0406",

    # Colorado
    "Colorado Central (US Feet)": "0502",
    "Colorado North (US Feet)": "0501",
    "Colorado South (US Feet)": "0503",

    # Connecticut
    "Connecticut (US Feet)": "0600",

    # Delaware
    "Delaware (US Feet)": "0700",

    # Florida
    "Florida East (US Feet)": "0901",
    "Florida West (US Feet)": "0902",
    "Florida North (US Feet)": "0903",

    # Georgia
    "Georgia East (US Feet)": "1001",
    "Georgia West (US Feet)": "1002",

    # Idaho
    "Idaho East (US Feet)": "1101",
    "Idaho Central (US Feet)": "1102",
    "Idaho West (US Feet)": "1103",

    # Illinois
    "Illinois East (US Feet)": "1201",
    "Illinois West (US Feet)": "1202",

    # Indiana
    "Indiana East (US Feet)": "1301",
    "Indiana West (US Feet)": "1302",

    # Iowa
    "Iowa North (US Feet)": "1401",
    "Iowa South (US Feet)": "1402",

    # Kansas
    "Kansas North (US Feet)": "1501",
    "Kansas South (US Feet)": "1502",

    # Kentucky
    "Kentucky North (US Feet)": "1601",
    "Kentucky South (US Feet)": "1602",

    # Louisiana
    "Louisiana North (US Feet)": "1701",
    "Louisiana South (US Feet)": "1702",
    "Louisiana Offshore (US Feet": "1703",

    # Maine
    "Maine East (US Feet)": "1801",
    "Maine West (US Feet)": "1802",

    # Maryland
    "Maryland (US Feet)": "1900",

    # Massachusetts
    "Massachusetts Mainland (US Feet)": "2001",
    "Massachusetts Island (US Feet)": "2002",

    # Michigan
    "Michigan Central (US Feet)": "2112",
    "Michigan North (US Feet)": "2111",
    "Michigan South (US Feet)": "2113",

    # Minnesota
    "Minnesota Central (US Feet)": "2202",
    "Minnesota North (US Feet)": "2201",
    "Minnesota South (US Feet)": "2203",

    # Mississippi
    "Mississippi East (US Feet)": "2301",
    "Mississippi West (US Feet)": "2302",

    # Missouri
    "Missouri East (US Feet)": "2401",
    "Missouri Central (US Feet)": "2402",
    "Missouri West (US Feet)": "2403",

    # Montana
    "Montana (US Feet)": "2500",

    # Nebraska
    "Nebraska (US Feet)": "2600",

    # Nevada
    "Nevada East (US Feet)": "2701",
    "Nevada Central (US Feet)": "2702",
    "Nevada West (US Feet)": "2703",

    # New Hampshire
    "New Hampshire (US Feet)": "2800",

    # New Jersey
    "New Jersey (US Feet)": "2900",

    # New Mexico
    "New Mexico East (US Feet)": "3001",
    "New Mexico Central (US Feet)": "3002",
    "New Mexico West (US Feet)": "3003",

    # New York
    "New York East (US Feet)": "3101",
    "New York Central (US Feet)": "3102",
    "New York West (US Feet)": "3103",
    "New York Long Island (US Feet)": "3104",

    # North Carolina
    "North Carolina (US Feet)": "3200",

    # North Dakota
    "North Dakota North (US Feet)": "3301",
    "North Dakota South (US Feet)": "3302",

    # Ohio
    "Ohio North (US Feet)": "3401",
    "Ohio South (US Feet)": "3402",

    # Oklahoma
    "Oklahoma North (US Feet)": "3501",
    "Oklahoma South (US Feet)": "3502",

    # Oregon
    "Oregon North (US Feet)": "3601",
    "Oregon South (US Feet)": "3602",

    # Pennsylvania
    "Pennsylvania North (US Feet)": "3701",
    "Pennsylvania South (US Feet)": "3702",

    # Rhode Island
    "Rhode Island (US Feet)": "3800",

    # South Carolina
    "South Carolina (US Feet)": "3900",

    # South Dakota
    "South Dakota North (US Feet)": "4001",
    "South Dakota South (US Feet)": "4002",

    # Tennessee
    "Tennessee (US Feet)": "4100",

    # Texas
    "Texas North (US Feet)": "4201",
    "Texas North Central (US Feet)": "4202",
    "Texas Central (US Feet)": "4203",
    "Texas South (US Feet)": "4205",
    "Texas South Central (USft)": "4204",

    # Utah
    "Utah North (US Feet)": "4301",
    "Utah Central (US Feet)": "4302",
    "Utah South (US Feet)": "4303",

    # Vermont
    "Vermont (US Feet)": "4400",

    # Virginia
    "Virginia North (US Feet)": "4501",
    "Virginia South (US Feet)": "4502",

    # Washington
    "Washington North (US Feet)": "4601",
    "Washington South (US Feet)": "4602",

    # West Virginia
    "West Virginia North (US Feet)": "4701",
    "West Virginia South (US Feet)": "4702",

    # Wisconsin
    "Wisconsin North (US Feet)": "4801",
    "Wisconsin Central (US Feet)": "4802",
    "Wisconsin South (US Feet)": "4803",

    # Wyoming
    "Wyoming East (US Feet)": "4901",
    "Wyoming East Central (US Feet)": "4902",
    "Wyoming West Central (US Feet)": "4903",
    "Wyoming West (US Feet)": "4904",

    # Territories (US Feet)
    "Puerto Rico (US Feet)": "5200",
    "Guam (US Feet)": "5400",
}

spcs83_to_epsg = {

    # Alabama
    "0101": 9748,  # NAD83(2011) / Alabama East (ftUS)
    "0102": 9749,  # NAD83(2011) / Alabama West (ftUS)

    # Alaska (Using ESRI codes for US Survey Feet)
    "5001": 6394,  # NAD_1983_StatePlane_Alaska_1_FIPS_5001_Feet
    "5002": 6395,  # NAD_1983_StatePlane_Alaska_2_FIPS_5002_Feet
    "5003": 6396,  # NAD_1983_StatePlane_Alaska_3_FIPS_5003_Feet
    "5004": 6397,  # NAD_1983_StatePlane_Alaska_4_FIPS_5004_Feet
    "5005": 6398,  # NAD_1983_StatePlane_Alaska_5_FIPS_5005_Feet
    "5006": 6399,  # NAD_1983_StatePlane_Alaska_6_FIPS_5006_Feet
    "5007": 6400,  # NAD_1983_StatePlane_Alaska_7_FIPS_5007_Feet
    "5008": 6401,  # NAD_1983_StatePlane_Alaska_8_FIPS_5008_Feet
    "5009": 6402,  # NAD_1983_StatePlane_Alaska_9_FIPS_5009_Feet
    "5010": 6403,  # NAD_1983_StatePlane_Alaska_10_FIPS_5010_Feet

    # Arizona (Using ESRI codes for US Survey Feet)
    "0201": 2222,  # NAD_1983_StatePlane_Arizona_East_FIPS_0201_Feet
    "0202": 2223,  # NAD_1983_StatePlane_Arizona_Central_FIPS_0202_Feet
    "0203": 2224,  # NAD_1983_StatePlane_Arizona_West_FIPS_0203_Feet

    # Arkansas
    "0301": 3433,  # NAD83 / Arkansas North (ftUS)
    "0302": 3434,  # NAD83 / Arkansas South (ftUS)

    # California
    "0401": 2225,  # NAD83 / California zone 1 (ftUS)
    "0402": 2226,  # NAD83 / California zone 2 (ftUS)
    "0403": 2227,  # NAD83 / California zone 3 (ftUS)
    "0404": 2228,  # NAD83 / California zone 4 (ftUS)
    "0405": 2229,  # NAD83 / California zone 5 (ftUS)
    "0406": 2230,  # NAD83 / California zone 6 (ftUS)

    # Colorado
    "0501": 2231,  # NAD83 / Colorado North (ftUS)
    "0502": 2232,  # NAD83 / Colorado Central (ftUS)
    "0503": 2233,  # NAD83 / Colorado South (ftUS)

    # Connecticut
    "0600": 2234,  # NAD83 / Connecticut (ftUS)

    # Delaware
    "0700": 2235,  # NAD83 / Delaware (ftUS)

    # Florida
    "0901": 2236,  # NAD83 / Florida East (ftUS)
    "0902": 2237,  # NAD83 / Florida West (ftUS)
    "0903": 2238,  # NAD83 / Florida North (ftUS)

    # Georgia
    "1001": 2239,  # NAD83 / Georgia East (ftUS)
    "1002": 2240,  # NAD83 / Georgia West (ftUS)

    # Hawaii (Using ESRI codes for US Survey Feet)
    "5101": 6628,  # NAD_1983_StatePlane_Hawaii_1_FIPS_5101_Feet
    "5102": 6629,  # NAD_1983_StatePlane_Hawaii_2_FIPS_5102_Feet
    "5103": 6633,  # NAD_1983_StatePlane_Hawaii_3_FIPS_5103_Feet
    "5104": 6631,  # NAD_1983_StatePlane_Hawaii_4_FIPS_5104_Feet
    "5105": 6632,  # NAD_1983_StatePlane_Hawaii_5_FIPS_5105_Feet

    # Idaho
    "1101": 2241,  # NAD83 / Idaho East (ftUS)
    "1102": 2242,  # NAD83 / Idaho Central (ftUS)
    "1103": 2243,  # NAD83 / Idaho West (ftUS)

    # Illinois
    "1201": 3435,  # NAD83 / Illinois East (ftUS)
    "1202": 3436,  # NAD83 / Illinois West (ftUS)

    # Indiana
    "1301": 2244,  # NAD83 / Indiana East (ftUS)
    "1302": 2245,  # NAD83 / Indiana West (ftUS)

    # Iowa
    "1401": 3417,  # NAD83 / Iowa North (ftUS)
    "1402": 6465,  # NAD83(2011) / Iowa South (ftUS) (or 3418 for NAD83)

    # Kansas
    "1501": 3419,  # NAD83 / Kansas North (ftUS)
    "1502": 3420,  # NAD83 / Kansas South (ftUS)

    # Kentucky
    "1601": 2246,  # NAD83 / Kentucky North (ftUS)
    "1602": 2247,  # NAD83 / Kentucky South (ftUS)

    # Louisiana
    "1701": 3451,  # NAD83 / Louisiana North (ftUS)
    "1702": 3452,  # NAD83 / Louisiana South (ftUS)

    # Maine
    "1801": 2248,  # NAD83 / Maine East (ftUS)
    "1802": 2249,  # NAD83 / Maine West (ftUS)

    # Maryland
    "1900": 2250,  # NAD83 / Maryland (ftUS)

    # Massachusetts
    "2001": 2249,  # NAD83 / Massachusetts Mainland (ftUS)
    "2002": 2250,  # NAD83 / Massachusetts Island (ftUS)

    # Michigan
    "2111": 6496,  # NAD_1983_StatePlane_Michigan_North_FIPS_2111_Feet
    "2112": 6497,  # NAD_1983_StatePlane_Michigan_Central_FIPS_2112_Feet
    "2113": 6498,  # NAD_1983_StatePlane_Michigan_South_FIPS_2113_Feet

    # Minnesota
    "2201": 2251,  # NAD83 / Minnesota North (ftUS)
    "2202": 2252,  # NAD83 / Minnesota Central (ftUS)
    "2203": 2253,  # NAD83 / Minnesota South (ftUS)

    # Mississippi
    "2301": 2254,  # NAD83 / Mississippi East (ftUS)
    "2302": 2255,  # NAD83 / Mississippi West (ftUS)

    # Missouri
    "2401": 2256,  # NAD83 / Missouri East (ftUS)
    "2402": 2257,  # NAD83 / Missouri Central (ftUS)
    "2403": 2258,  # NAD83 / Missouri West (ftUS)

    # Montana
    "2500": 2259,  # NAD83 / Montana (ftUS)

    # Nebraska
    "2600": 6880,  # NAD83 / Nebraska (ftUS)

    # Nevada
    "2701": 6517,  # NAD83(2011) / Nevada East (ftUS) (or 2261 for NAD83)
    "2702": 6519,  # NAD83(2011) / Nevada Central (ftUS) (or 2262 for NAD83)
    "2703": 6521,  # NAD83(2011) / Nevada West (ftUS) (or 2263 for NAD83)

    # New Hampshire
    "2800": 2264,  # NAD83 / New Hampshire (ftUS)

    # New Jersey
    "2900": 2265,  # NAD83 / New Jersey (ftUS)

    # New Mexico
    "3001": 2266,  # NAD83 / New Mexico East (ftUS)
    "3002": 2267,  # NAD83 / New Mexico Central (ftUS)
    "3003": 2268,  # NAD83 / New Mexico West (ftUS)

    # New York
    "3101": 2260,  # NAD83 / New York East (ftUS)
    "3102": 2261,  # NAD83 / New York Central (ftUS)
    "3103": 2262,  # NAD83 / New York West (ftUS)
    "3104": 2263,  # NAD83 / New York Long Island (ftUS)

    # North Carolina
    "3200": 2265,  # NAD83 / North Carolina (ftUS)

    # North Dakota
    "3301": 2267,  # NAD83 / North Dakota North (ftUS)
    "3302": 2268,  # NAD83 / North Dakota South (ftUS)

    # Ohio
    "3401": 3734,  # NAD83 / Ohio North (ftUS)
    "3402": 3735,  # NAD83 / Ohio South (ftUS)

    # Oklahoma
    "3501": 6553,  # NAD83 / Oklahoma North (ftUS)
    "3502": 6554,  # NAD83 / Oklahoma South (ftUS)

    # Oregon
    "3601": 2271,  # NAD83 / Oregon North (ftUS)
    "3602": 2272,  # NAD83 / Oregon South (ftUS)

    # Pennsylvania
    "3701": 2271,  # NAD83 / Pennsylvania North (ftUS)
    "3702": 2272,  # NAD83 / Pennsylvania South (ftUS)

    # Rhode Island
    "3800": 2273,  # NAD83 / Rhode Island (ftUS)

    # South Carolina
    "3900": 2274,  # NAD83 / South Carolina (ftUS)

    # South Dakota
    "4001": 2275,  # NAD83 / South Dakota North (ftUS)
    "4002": 2276,  # NAD83 / South Dakota South (ftUS)

    # Tennessee
    "4100": 2274,  # NAD83 / Tennessee (ftUS)

    # Texas
    "4201": 2276,  # NAD83 / Texas North (ftUS)
    "4202": 2277,  # NAD83 / Texas North Central (ftUS)
    "4203": 2278,  # NAD83 / Texas Central (ftUS)
    "4204": 2279,  # NAD83 / Texas South Central (ftUS)
    "4205": 2280,  # NAD83 / Texas South (ftUS)

    # Utah
    "4301": 2280,  # NAD83 / Utah North (ftUS)
    "4302": 2281,  # NAD83 / Utah Central (ftUS)
    "4303": 2282,  # NAD83 / Utah South (ftUS)

    # Vermont
    "4400": 2283,  # NAD83 / Vermont (ftUS)

    # Virginia
    "4501": 2284,  # NAD83 / Virginia North (ftUS)
    "4502": 2285,  # NAD83 / Virginia South (ftUS)

    # Washington
    "4601": 2285,  # NAD83 / Washington North (ftUS)
    "4602": 6599,  # NAD83(2011) / Washington South (ftUS) (or 2286 for NAD83)

    # West Virginia
    "4701": 2287,  # NAD83 / West Virginia North (ftUS)
    "4702": 2288,  # NAD83 / West Virginia South (ftUS)

    # Wisconsin
    "4801": 2289,  # NAD83 / Wisconsin North (ftUS)
    "4802": 2290,  # NAD83 / Wisconsin Central (ftUS)
    "4803": 2291,  # NAD83 / Wisconsin South (ftUS)

    # Wyoming
    "4901": 2292,  # NAD83 / Wyoming East (ftUS)
    "4902": 2293,  # NAD83 / Wyoming East Central (ftUS)
    "4903": 2294,  # NAD83 / Wyoming West Central (ftUS)
    "4904": 2295,  # NAD83 / Wyoming West (ftUS)

    # Territories
    "5200": 6567,  # NAD83(2011) / Puerto Rico and Virgin Is (ftUS)
    "5400": 3829,  # NAD83 / Guam (ftUS)

}

us_states = [
    "Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado",
    "Connecticut", "Delaware", "Florida", "Georgia", "Hawaii", "Idaho",
    "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana",
    "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota",
    "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada",
    "New Hampshire", "New Jersey", "New Mexico", "New York",
    "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon",
    "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota",
    "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington",
    "West Virginia", "Wisconsin", "Wyoming"
]


# --- Data Loading (Simulated for demonstration) ---
# In a real application, you would load a GeoJSON or shapefile here
# For the purpose of demonstration, I'll simulate a very basic lookup.
# For a full implementation, you'd need a comprehensive county-to-SPCS mapping.

# A highly simplified and incomplete mapping for demonstration.
# Real data would involve spatial queries.
# This is NOT comprehensive, it's just to show the structure.
# You'd typically load this from a pre-processed GeoJSON.

county_spcs_mapping = {
    "Texas": {
        "Harris": {"zone_name": "Texas South Central", "fips": "4204"},
        "Dallas": {"zone_name": "Texas North Central", "fips": "4202"},
        "Bexar": {"zone_name": "Texas South Central", "fips": "4204"}, # Example
    },
    "California": {
        "Los Angeles": {"zone_name": "California Zone V", "fips": "0405"},
        "San Bernardino": {"zone_name": "California Zone VI", "fips": "0406"},
    },
    # ... add more states and counties as needed for a full dataset
}

# Placeholder for actual county GeoJSON data if loaded
# This URL is just an example. You'd need a hosted GeoJSON or a local file.
# For a real project, consider hosting a simplified county GeoJSON or packaging it.
# E.g., from https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html
# or a pre-processed version with SPCS info.
# For now, we'll use a placeholder URL and rely on manual mapping for the demo.
# county_geojson_url = "https://raw.githubusercontent.com/OpenDataDE/State-County-Shapefiles/master/geojson/alabama-counties.json" # Example, not comprehensive
# @st.cache_data # Cache the data loading
# def load_county_geojson(url):
#     response = requests.get(url)
#     return response.json()
# county_data = load_county_geojson(county_geojson_url) # Not using this yet, demonstrating structure

